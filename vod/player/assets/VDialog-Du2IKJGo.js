import{p as e,bc as a,s as t,ac as o,ap as l,t as n,aL as r,R as s,H as c,af as u,ao as i,au as v,m as d,d as f,$ as p,bf as m}from"./index-2SkDt_TU.js";import{a as g}from"./VDivider-C1bqgPYi.js";const E=e({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...a({origin:"center center",scrollStrategy:"block",transition:{component:g},zIndex:2400})},"VDialog"),V=t()({name:"VDialog",props:E(),emits:{"update:modelValue":e=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(e,a){function t(e){var a,t;const o=e.relatedTarget,l=e.target;if(o!==l&&(null==(a=P.value)?void 0:a.contentEl)&&(null==(t=P.value)?void 0:t.globalTop)&&![document,P.value.contentEl].includes(l)&&!P.value.contentEl.contains(l)){const e=m(P.value.contentEl);if(!e.length)return;const a=e[0];o===a?e[e.length-1].focus():a.focus()}}function g(){var e;V("afterEnter"),(null==(e=P.value)?void 0:e.contentEl)&&!P.value.contentEl.contains(document.activeElement)&&P.value.contentEl.focus({preventScroll:!0})}function E(){V("afterLeave")}let{emit:V,slots:b}=a;const y=o(e,"modelValue"),{scopeId:L}=l(),P=n();return r&&s((()=>y.value&&e.retainFocus),(e=>{e?document.addEventListener("focusin",t):document.removeEventListener("focusin",t)}),{immediate:!0}),s(y,(async e=>{var a;e||(await i(),null==(a=P.value.activatorEl)||a.focus({preventScroll:!0}))})),c((()=>{const a=v.filterProps(e),t=d({"aria-haspopup":"dialog"},e.activatorProps),o=d({tabindex:-1},e.contentProps);return f(v,d({ref:P,class:["v-dialog",{"v-dialog--fullscreen":e.fullscreen,"v-dialog--scrollable":e.scrollable},e.class],style:e.style},a,{modelValue:y.value,"onUpdate:modelValue":e=>y.value=e,"aria-modal":"true",activatorProps:t,contentProps:o,role:"dialog",onAfterEnter:g,onAfterLeave:E},L),{activator:b.activator,default:function(){for(var e=arguments.length,a=Array(e),t=0;e>t;t++)a[t]=arguments[t];return f(p,{root:"VDialog"},{default:()=>{var e;return[null==(e=b.default)?void 0:e.call(b,...a)]}})}})})),u({},P)}});export{V};
